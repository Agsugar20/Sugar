<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writer's Professional Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script>

    <style>
        :root { --primary: #6c5ce7; --bg: #f0f2f5; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 40px 20px; }
        .container { width: 100%; max-width: 800px; }
        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        /* ì…ë ¥ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .input-box { display: flex; flex-direction: column; }
        input { padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; margin-top: 5px; }
        
        /* ê²Œì´ì§€ ìŠ¤íƒ€ì¼ */
        .progress-wrapper { margin: 30px 0; }
        .bar-bg { background: #eee; height: 12px; border-radius: 10px; overflow: hidden; }
        .bar-fill { background: linear-gradient(90deg, #6c5ce7, #a29bfe); height: 100%; width: 0%; transition: 0.8s ease-out; }
        
        .formula-display { background: #f8f9fa; border-left: 5px solid var(--primary); padding: 20px; border-radius: 10px; font-size: 1.2rem; overflow-x: auto; }
        h2 { margin-top: 0; font-size: 1.2rem; color: #444; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>ğŸ“Š ì§‘í•„ ë°ì´í„° ì„¤ì •</h2>
        <div class="input-group">
            <div class="input-box">
                <label>ëª©í‘œ ììˆ˜ (Total)</label>
                <input type="number" id="targetWords" value="50000" oninput="updateAll()">
            </div>
            <div class="input-box">
                <label>í˜„ì¬ê¹Œì§€ ì“´ ììˆ˜</label>
                <input type="number" id="currentWords" value="12500" oninput="updateAll()">
            </div>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ“ˆ ì‹¤ì‹œê°„ ë‹¬ì„±ë¥ </h2>
        <div id="percentageText" style="font-weight: bold; font-size: 1.5rem; color: var(--primary);">0%</div>
        <div class="progress-wrapper">
            <div class="bar-bg"><div id="progressBar" class="bar-fill"></div></div>
        </div>
        
        <div id="mathDisplay" class="formula-display">
            </div>
    </div>
</div>

<script>
    function updateAll() {
        const target = document.getElementById('targetWords').value || 1;
        const current = document.getElementById('currentWords').value || 0;
        const percent = ((current / target) * 100).toFixed(1);
        const remaining = target - current;

        // ì§„í–‰ë°” ë° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        document.getElementById('progressBar').style.width = percent + "%";
        document.getElementById('percentageText').innerText = `${current.toLocaleString()} / ${parseInt(target).toLocaleString()} (${percent}%)`;

        // LaTeX ìˆ˜ì‹ ì‹¤ì‹œê°„ ìƒì„±
        const mathArea = document.getElementById('mathDisplay');
        const formula = `
            \\text{Current Status: } P = \\frac{${current}}{${target}} \\times 100 = ${percent}\\% \\\\
            \\text{Remaining: } W_{rem} = ${target} - ${current} = ${remaining.toLocaleString()}
        `;
        
        mathArea.innerHTML = "$$" + formula + "$$";
        
        // ìˆ˜ì‹ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });

        // ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥ (ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€)
        localStorage.setItem('writingData', JSON.stringify({target, current}));
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = function() {
        const saved = JSON.parse(localStorage.getItem('writingData'));
        if(saved) {
            document.getElementById('targetWords').value = saved.target;
            document.getElementById('currentWords').value = saved.current;
        }
        updateAll();
    };
</script>

</body>
</html>
